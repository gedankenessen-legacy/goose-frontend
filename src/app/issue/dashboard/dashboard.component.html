<header class="header">
  <b>Tickets</b>
  <div class="header__buttons">
    <button nz-button nzType="primary" (click)="toggleCardDesign()" disabled>
      PDF
    </button>
    <button nz-button nzType="primary" [routerLink]="['create']">
      Neues Ticket
    </button>
    <button nz-button nzType="primary" (click)="toggleCardDesign()">
      {{ btnCardDesignTitle }}
    </button>
    <button nz-button nzType="primary" (click)="toggleSearch()">
      <i nz-icon nzType="search" nzTheme="outline"></i>
    </button>
  </div>
</header>
<div *ngIf="searchVisible" class="search-container">
  <nz-input-group [nzSuffix]="suffixIconSearch">
    <input type="text" nz-input placeholder="Suche" [(ngModel)]="searchValue"/>
  </nz-input-group>
  <ng-template #suffixIconSearch>
    <i nz-icon nzType="search"></i>
  </ng-template>
</div>
<nz-table #basicTable [nzData]="listOfIssues" *ngIf="!cardDesign">
  <thead>
    <tr>
      <th>Ticketname</th>
      <th>Projekt</th>
      <th>Autor</th>
      <th>Fortschritt</th>
      <th>Status</th>
      <th>Gebuchte/Geschätzte Zeit</th>
      <th>Start</th>
      <th>Deadline</th>
      <th>Priorität</th>
      <th>Bearbeiten</th>
    </tr>
  </thead>
  <tbody>
    <tr (click)="routeToIssue(data.id)" *ngFor="let data of basicTable.data">
      <td>{{ data.issueDetail.name }}</td>
      <td>{{ data.project.name }}</td>
      <td>{{ data.author?.firstname + " " + data.author?.lastname }}</td>
      <td>{{ data.issueDetail.progress }}</td>
      <td>{{ data.issueDetail.state?.name }}</td>
      <td>{{ "0/" + data.issueDetail.expectedTime }}</td>
      <td>{{ data.issueDetail.startDate | date: "dd/MM/yyyy" }}</td>
      <td>{{ data.issueDetail.endDate | date: "dd/MM/yyyy" }}</td>
      <td>{{ data.issueDetail.priority }}</td>
      <td>
        <button
          class="QAWrapper"
          nz-button
          nzType="primary"
          [routerLink]="[data.id + '/edit']"
        >
          <i nz-icon nzType="setting"></i>
        </button>
      </td>
    </tr>
  </tbody>
</nz-table>
<app-card-design *ngIf="cardDesign" [projectId]="projectId" [companyId]="companyId" [searchValue]="searchValue"> </app-card-design>
